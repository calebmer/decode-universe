#!/bin/bash

# This script should be idempotent! In other words you should be able to run it
# multiple times and you will always get the same result no matter the previous
# state of universe.

echo ""
echo "[1/3] Cleaning existing node_modules."
rm -rf node_modules
rm -rf packages/*/node_modules

echo ""
echo "[2/3] Installing root node modules."
echo ""
npm install

echo ""
echo "[3/3] Bootstrapping with lerna."
echo ""
$(npm bin)/lerna bootstrap

echo ""
